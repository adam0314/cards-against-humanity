
var util = require('util');

var Game = require('../models/game').Game;
var test = require('../tests/game').UnitTest;

// game vars
var games = [];


// app messages
var MSGS = {
  WAITFORSTART: "Waiting for more players. Have a drink.",
  WAITFORROUND: "Waiting for the next round, do a shot you pussy."
};


// card decks
var whiteCards = [{title: '“Tweeting.”', id: 'wc1'}, {title: '72 virgins.', id: 'wc2'}, {title: '8 oz. of sweet Mexican black-tar heroin.', id: 'wc3'}, {title: 'A 55-gallon drum of lube.', id: 'wc4'}, {title: 'A bag of magic beans.', id: 'wc5'}, {title: 'A balanced breakfast.', id: 'wc6'}, {title: 'A beached whale.', id: 'wc7'}, {title: 'A big black dick.', id: 'wc8'}, {title: 'A big hoopla about nothing.', id: 'wc9'}, {title: 'A bigger, blacker dick.', id: 'wc10'}, {title: 'A bleached asshole.', id: 'wc11'}, {title: 'A bloody pacifier.', id: 'wc12'}, {title: 'A Bop It.', id: 'wc13'}, {title: 'A brain tumor.', id: 'wc14'}, {title: 'A Burmese tiger pit.', id: 'wc15'}, {title: 'A can of whoop-ass.', id: 'wc16'}, {title: 'A Christmas stocking full of coleslaw.', id: 'wc17'}, {title: 'A clandestine butt scratch.', id: 'wc18'}, {title: 'A cooler full of organs.', id: 'wc19'}, {title: 'A crappy little hand.', id: 'wc20'}, {title: 'A death ray.', id: 'wc21'}, {title: 'A defective condom.', id: 'wc22'}, {title: 'A disappointing birthday party.', id: 'wc23'}, {title: 'A dollop of sour cream.', id: 'wc24'}, {title: 'A drive-by shooting.', id: 'wc25'}, {title: 'A falcon with a cap on its head.', id: 'wc26'}, {title: 'A fetus.', id: 'wc27'}, {title: 'A foul mouth.', id: 'wc28'}, {title: 'A gassy antelope.', id: 'wc29'}, {title: 'A gentle caress of the inner thigh.', id: 'wc30'}, {title: 'A good sniff.', id: 'wc31'}, {title: 'A Gypsy curse.', id: 'wc32'}, {title: 'A homoerotic volleyball montage.', id: 'wc33'}, {title: 'A hot mess.', id: 'wc34'}, {title: 'A Hungry-Man Frozen Christmas Dinner for One.', id: 'wc35'}, {title: 'A lifetime of sadness.', id: 'wc36'}, {title: 'A look-see.', id: 'wc37'}, {title: 'A low standard of living.', id: 'wc38'}, {title: 'A magic hippie love cloud.', id: 'wc39'}, {title: 'A man in yoga pants with a ponytail and feather earrings.', id: 'wc40'}, {title: 'A mating display.', id: 'wc41'}, {title: 'A micropenis.', id: 'wc42'}, {title: 'A middle-aged man on roller skates.', id: 'wc43'}, {title: 'A mime having a stroke.', id: 'wc44'}, {title: 'A monkey smoking a cigar.', id: 'wc45'}, {title: 'A mopey zoo lion.', id: 'wc46'}, {title: 'A murder most foul.', id: 'wc47'}, {title: 'A nuanced critique.', id: 'wc48'}, {title: 'A passionate Latino lover.', id: 'wc49'}, {title: 'A pinata full of scorpions.', id: 'wc50'}, {title: 'A really cool hat.', id: 'wc51'}, {title: 'A rival dojo', id: 'wc52'}, {title: 'A robust mongoloid.', id: 'wc53'}, {title: 'A sad fat dragon with no friends.', id: 'wc54'}, {title: 'A sad handjob.', id: 'wc55'}, {title: 'A salty surprise.', id: 'wc56'}, {title: 'A sassy black woman.', id: 'wc57'}, {title: 'A sausage festival.', id: 'wc58'}, {title: 'A sea of troubles.', id: 'wc59'}, {title: 'A slightly shittier parallel universe.', id: 'wc60'}, {title: 'A snapping turtle biting the tip of your penis.', id: 'wc61'}, {title: 'A soulful rendition of “Ol\' Man River.”', id: 'wc62'}, {title: 'A squadron of moles wearing aviator goggles.', id: 'wc63'}, {title: 'A stray pube.', id: 'wc64'}, {title: 'A Super Soaker full of cat pee.', id: 'wc65'}, {title: 'A sweaty, panting leather daddy.', id: 'wc66'}, {title: 'A sweet spaceship.', id: 'wc67'}, {title: 'A thermonuclear detonation.', id: 'wc68'}, {title: 'A tiny horse.', id: 'wc69'}, {title: 'A toxic family environment.', id: 'wc70'}, {title: 'A visually arresting turtleneck.', id: 'wc71'}, {title: 'A web of lies.', id: 'wc72'}, {title: 'A windmill full of corpses.', id: 'wc73'}, {title: 'A woman scorned.', id: 'wc74'}, {title: 'A zesty breakfast burrito.', id: 'wc75'}, {title: 'Aaron Burr.', id: 'wc76'}, {title: 'Active listening.', id: 'wc77'}, {title: 'Actually taking candy from a baby.', id: 'wc78'}, {title: 'Adderall.', id: 'wc79'}, {title: 'African children.', id: 'wc80'}, {title: 'Agriculture.', id: 'wc81'}, {title: 'AIDS.', id: 'wc82'}, {title: 'Alcoholism.', id: 'wc83'}, {title: 'All of this blood.', id: 'wc84'}, {title: 'All-you-can-eat shrimp for $4.99.', id: 'wc85'}, {title: 'Altar boys.', id: 'wc86'}, {title: 'American Gladiators.', id: 'wc87'}, {title: 'Amputees.', id: 'wc88'}, {title: 'An army of skeletons.', id: 'wc89'}, {title: 'An asymmetric boob job.', id: 'wc90'}, {title: 'An erection that lasts more than four hours.', id: 'wc91'}, {title: 'An ether-soaked rag.', id: 'wc92'}, {title: 'An honest cop with nothing left to lose.', id: 'wc93'}, {title: 'An icepick lobotomy.', id: 'wc94'}, {title: 'An M. Night Shyamalan plot twist.', id: 'wc95'}, {title: 'An Oedipus complex.', id: 'wc96'}, {title: 'An unhinged ferris wheel rolling toward the sea.', id: 'wc97'}, {title: 'Anal beads.', id: 'wc98'}, {title: 'Another goddamn vampire movie.', id: 'wc99'}, {title: 'Another shitty year.', id: 'wc100'}, {title: 'Another shop of morphine.', id: 'wc101'}, {title: 'Apologizing.', id: 'wc102'}, {title: 'Appreciative snapping.', id: 'wc103'}, {title: 'Arnold Schwarzenegger.', id: 'wc104'}, {title: 'Asians who aren\'t good at math.', id: 'wc105'}, {title: 'Assless chaps.', id: 'wc106'}, {title: 'Attitude.', id: 'wc107'}, {title: 'Auschwitz.', id: 'wc108'}, {title: 'Authentic Mexican cuisine.', id: 'wc109'}, {title: 'Autocannibalism.', id: 'wc110'}, {title: 'AXE body spray.', id: 'wc111'}, {title: 'Balls.', id: 'wc112'}, {title: 'Barack Obama.', id: 'wc113'}, {title: 'Basic human decency.', id: 'wc114'}, {title: 'BATMAN!!!', id: 'wc115'}, {title: 'Beating your wives.', id: 'wc116'}, {title: 'Beefin\' over turf.', id: 'wc117'}, {title: 'Bees?', id: 'wc118'}, {title: 'Being a bust adult with many important things to do.', id: 'wc119'}, {title: 'Being a dick to children.', id: 'wc120'}, {title: 'Being a dinosaur.', id: 'wc121'}, {title: 'Being a motherfucking sorcerer.', id: 'wc122'}, {title: 'Being awesome at sex.', id: 'wc123'}, {title: 'Being fabulous.', id: 'wc124'}, {title: 'Being marginalized.', id: 'wc125'}, {title: 'Being on fire.', id: 'wc126'}, {title: 'Being rich.', id: 'wc127'}, {title: 'Bill Nye the Science Guy.', id: 'wc128'}, {title: 'Bingeing and purging.', id: 'wc129'}, {title: 'Bitches.', id: 'wc130'}, {title: 'Black people.', id: 'wc131'}, {title: 'Bling.', id: 'wc132'}, {title: 'Booby-trapping the house to foil burglars.', id: 'wc133'}, {title: 'Boogers.', id: 'wc134'}, {title: 'Boris the Soviet Love Hammer.', id: 'wc135'}, {title: 'Bosnian chicken farmers.', id: 'wc136'}, {title: 'Breaking out into song and dance.', id: 'wc137'}, {title: 'Britney Spears at 55.', id: 'wc138'}, {title: 'Bullshit.', id: 'wc139'}, {title: 'Cards Against Humanity.', id: 'wc140'}, {title: 'Carnies.', id: 'wc141'}, {title: 'Catapults.', id: 'wc142'}, {title: 'Catastrophic Urethral Trauma.', id: 'wc143'}, {title: 'Centaurs.', id: 'wc144'}, {title: 'Chainsaws for hands.', id: 'wc145'}, {title: 'Charisma.', id: 'wc146'}, {title: 'Cheating in the Special Olympics.', id: 'wc147'}, {title: 'Child abuse.', id: 'wc148'}, {title: 'Child beauty pageants.', id: 'wc149'}, {title: 'Children on leashes.', id: 'wc150'}, {title: 'Chivalry.', id: 'wc151'}, {title: 'Christopher Walken.', id: 'wc152'}, {title: 'Civilian casualties.', id: 'wc153'}, {title: 'Clams.', id: 'wc154'}, {title: 'Classist Undertones.', id: 'wc155'}, {title: 'Clearing a bloody path through Walmart with a scimitar.', id: 'wc156'}, {title: 'Coat hanger abortions.', id: 'wc157'}, {title: 'Cockfights.', id: 'wc158'}, {title: 'College.', id: 'wc159'}, {title: 'Concealing a boner.', id: 'wc160'}, {title: 'Consultants.', id: 'wc161'}, {title: 'Copping a feel.', id: 'wc162'}, {title: 'Coughing into a vagina.', id: 'wc163'}, {title: 'Count Chocula.', id: 'wc164'}, {title: 'Crippling debt.', id: 'wc165'}, {title: 'Crystal meth.', id: 'wc166'}, {title: 'Cuddling.', id: 'wc167'}, {title: 'Customer service representatives.', id: 'wc168'}, {title: 'Cybernetic enhancements.', id: 'wc169'}, {title: 'Daddy issues.', id: 'wc170'}, {title: 'Daddy\'s belt.', id: 'wc171'}, {title: 'Dancing with a broom.', id: 'wc172'}, {title: 'Darth Vader.', id: 'wc173'}, {title: 'Date rape.', id: 'wc174'}, {title: 'Dead babies.', id: 'wc175'}, {title: 'Dead parents.', id: 'wc176'}, {title: 'Death by Steven Seagal.', id: 'wc177'}, {title: 'Deflowering the princess.', id: 'wc178'}, {title: 'Dental dams.', id: 'wc179'}, {title: 'Dick Cheney.', id: 'wc180'}, {title: 'Dick fingers.', id: 'wc181'}, {title: 'Dining with cardboard cutouts of the cast of “Friends.”', id: 'wc182'}, {title: 'Doin\' it in the butt.', id: 'wc183'}, {title: 'Doing the right thing.', id: 'wc184'}, {title: 'Domino\'s Oreo Dessert Pizza.', id: 'wc185'}, {title: 'Dorito breath.', id: 'wc186'}, {title: 'Double penetration.', id: 'wc187'}, {title: 'Drinking alone.', id: 'wc188'}, {title: 'Dropping a chandelier on your enemies and riding the rope up.', id: 'wc189'}, {title: 'Dry heaving.', id: 'wc190'}, {title: 'Dwarf tossing.', id: 'wc191'}, {title: 'Dying of dysentery.', id: 'wc192'}, {title: 'Dying.', id: 'wc193'}, {title: 'Eating all of the cookies before the AIDS bake-sale.', id: 'wc194'}, {title: 'Eating an albino.', id: 'wc195'}, {title: 'Eating an entire snowman.', id: 'wc196'}, {title: 'Eating the last known Bison.', id: 'wc197'}, {title: 'Edible underpants.', id: 'wc198'}, {title: 'Elderly Japanese men.', id: 'wc199'}, {title: 'Elf cum.', id: 'wc200'}, {title: 'Embryonic stem cells.', id: 'wc201'}, {title: 'Emotions.', id: 'wc202'}, {title: 'Enormous Scandinavian women.', id: 'wc203'}, {title: 'Erectile dysfunction.', id: 'wc204'}, {title: 'Estrogen.', id: 'wc205'}, {title: 'Ethnic cleansing.', id: 'wc206'}, {title: 'Eugenics.', id: 'wc207'}, {title: 'Euphoria by Calvin Klein.', id: 'wc208'}, {title: 'Exactly what you\'d expect.', id: 'wc209'}, {title: 'Exchanging pleasantries.', id: 'wc210'}, {title: 'Existing.', id: 'wc211'}, {title: 'Expecting a burp and vomiting on the floor.', id: 'wc212'}, {title: 'Explosions.', id: 'wc213'}, {title: 'Fabricating statistics.', id: 'wc214'}, {title: 'Famine.', id: 'wc215'}, {title: 'Fancy Feast.', id: 'wc216'}, {title: 'Farting and walking away.', id: 'wc217'}, {title: 'Fear itself.', id: 'wc218'}, {title: 'Feeding Rosie O\'Donnell.', id: 'wc219'}, {title: 'Fetal alcohol syndrome.', id: 'wc220'}, {title: 'Fiery poops.', id: 'wc221'}, {title: 'Figgy pudding.', id: 'wc222'}, {title: 'Finding a skeleton.', id: 'wc223'}, {title: 'Finding Waldo.', id: 'wc224'}, {title: 'Finger painting.', id: 'wc225'}, {title: 'Fingering.', id: 'wc226'}, {title: 'Firing a rifle into the air while balls deep in a squealing hog.', id: 'wc227'}, {title: 'Five-Dollar Footlongs.', id: 'wc228'}, {title: 'Flash flooding.', id: 'wc229'}, {title: 'Flesh-eating bacteria.', id: 'wc230'}, {title: 'Flightless birds.', id: 'wc231'}, {title: 'Flying sex snakes.', id: 'wc232'}, {title: 'Foreskin.', id: 'wc233'}, {title: 'Forgetting the Alamo.', id: 'wc234'}, {title: 'Former President George W. Bush.', id: 'wc235'}, {title: 'Free samples.', id: 'wc236'}, {title: 'Friction.', id: 'wc237'}, {title: 'Friendly fire.', id: 'wc238'}, {title: 'Friends who eat all the snacks.', id: 'wc239'}, {title: 'Friends with benefits.', id: 'wc240'}, {title: 'Frolicking.', id: 'wc241'}, {title: 'Fuck Mountain.', id: 'wc242'}, {title: 'Fucking up “Silent Night” in front of 300 parents.', id: 'wc243'}, {title: 'Full frontal nudity.', id: 'wc244'}, {title: 'Gandalf.', id: 'wc245'}, {title: 'Geese.', id: 'wc246'}, {title: 'Genetically engineered super-soldiers.', id: 'wc247'}, {title: 'Genghis Khan.', id: 'wc248'}, {title: 'Genital piercings.', id: 'wc249'}, {title: 'George Clooney\'s musk.', id: 'wc250'}, {title: 'German dungeon porn.', id: 'wc251'}, {title: 'Getting abducted by Peter Pan.', id: 'wc252'}, {title: 'Getting drunk on mouthwash.', id: 'wc253'}, {title: 'Getting hilariously gang-banged by the Blue Man Group.', id: 'wc254'}, {title: 'Getting in her pants, politely.', id: 'wc255'}, {title: 'Getting naked and watching Nickelodeon.', id: 'wc256'}, {title: 'Getting really high.', id: 'wc257'}, {title: 'Getting so angry that you pop a boner.', id: 'wc258'}, {title: 'Ghandi.', id: 'wc259'}, {title: 'Ghosts.', id: 'wc260'}, {title: 'Gift-wrapping a live hamster.', id: 'wc261'}, {title: 'Giving 110%.', id: 'wc262'}, {title: 'Gladitorial combat.', id: 'wc263'}, {title: 'Glenn Beck being harried by a swarm of buzzards.', id: 'wc264'}, {title: 'Glenn Beck catching his scrotum on a curtain hook.', id: 'wc265'}, {title: 'Glenn Beck convulsively vomiting as a brood of crab spiders hatches in his brain and erupts from his tear ducts.', id: 'wc266'}, {title: 'Global warming.', id: 'wc267'}, {title: 'Gloryholes.', id: 'wc268'}, {title: 'Goats eating cans.', id: 'wc269'}, {title: 'Goblins.', id: 'wc270'}, {title: 'God.', id: 'wc271'}, {title: 'GoGurt.', id: 'wc272'}, {title: 'Golden showers.', id: 'wc273'}, {title: 'Good grammar.', id: 'wc274'}, {title: 'Grandma.', id: 'wc275'}, {title: 'Grandpa\'s ashes.', id: 'wc276'}, {title: 'Graphic violence, adult language and some sexual content.', id: 'wc277'}, {title: 'Grave robbing.', id: 'wc278'}, {title: 'Guys who don\'t call.', id: 'wc279'}, {title: 'Half-assed foreplay.', id: 'wc280'}, {title: 'Harry Potter erotica.', id: 'wc281'}, {title: 'Heartwarming orphans.', id: 'wc282'}, {title: 'Her Royal Highness, Queen Elizabeth II.', id: 'wc283'}, {title: 'Heteronormativity.', id: 'wc284'}, {title: 'Hillary Clinton\'s death stare.', id: 'wc285'}, {title: 'Hipsters.', id: 'wc286'}, {title: 'Historical revisionism.', id: 'wc287'}, {title: 'Historically black colleges.', id: 'wc288'}, {title: 'Home video of Oprah sobbing into a Lean Cuisine.', id: 'wc289'}, {title: 'Homeless people.', id: 'wc290'}, {title: 'Hope.', id: 'wc291'}, {title: 'Hormone injections.', id: 'wc292'}, {title: 'Horrifying laser hair removal accidents.', id: 'wc293'}, {title: 'Horse meat.', id: 'wc294'}, {title: 'Hot Cheese.', id: 'wc295'}, {title: 'Hot people.', id: 'wc296'}, {title: 'Hot Pockets.', id: 'wc297'}, {title: 'Hulk Hogan.', id: 'wc298'}, {title: 'Hurricane Katrina.', id: 'wc299'}, {title: 'Immaculate conception.', id: 'wc300'}, {title: 'Inappropriate yodeling.', id: 'wc301'}, {title: 'Incest.', id: 'wc302'}, {title: 'Insatiable bloodlust.', id: 'wc303'}, {title: 'Intelligent design.', id: 'wc304'}, {title: 'Intimacy problems.', id: 'wc305'}, {title: 'Italians.', id: 'wc306'}, {title: 'Jafar.', id: 'wc307'}, {title: 'Jean-Claude Van Damme.', id: 'wc308'}, {title: 'Jeff Goldblum.', id: 'wc309'}, {title: 'Jerking off into a pool of children\'s tears.', id: 'wc310'}, {title: 'Jew-fros.', id: 'wc311'}, {title: 'Jewish fraternities.', id: 'wc312'}, {title: 'Jibber-jabber.', id: 'wc313'}, {title: 'John Wilkes Booth.', id: 'wc314'}, {title: 'Judge Judy.', id: 'wc315'}, {title: 'Just the tip.', id: 'wc316'}, {title: 'Justin Bieber.', id: 'wc317'}, {title: 'Kamikaze pilots.', id: 'wc318'}, {title: 'Kanye West.', id: 'wc319'}, {title: 'Keanu Reaves.', id: 'wc320'}, {title: 'Keg stands.', id: 'wc321'}, {title: 'Kids with ass cancer.', id: 'wc322'}, {title: 'Kim-Jong-il.', id: 'wc323'}, {title: 'Krampus, the Austrian Christmas Monster.', id: 'wc324'}, {title: 'Lactation.', id: 'wc325'}, {title: 'Lady Gaga.', id: 'wc326'}, {title: 'Lance Armstrong\'s missing testicle.', id: 'wc327'}, {title: 'Land mines.', id: 'wc328'}, {title: 'Laying an egg.', id: 'wc329'}, {title: 'Leaving an awkward voicemail.', id: 'wc330'}, {title: 'Leprosy.', id: 'wc331'}, {title: 'Leveling up.', id: 'wc332'}, {title: 'Licking things to claim them as your own.', id: 'wc333'}, {title: 'Literally eating shit.', id: 'wc334'}, {title: 'Living in a trashcan.', id: 'wc335'}, {title: 'Lockjaw.', id: 'wc336'}, {title: 'Loki, the trickster god.', id: 'wc337'}, {title: 'Loose lips.', id: 'wc338'}, {title: 'Lumberjack fantasies.', id: 'wc339'}, {title: 'Lunchables.', id: 'wc340'}, {title: 'Mad hacky-sack skills.', id: 'wc341'}, {title: 'Making a friend.', id: 'wc342'}, {title: 'Making a pouty face.', id: 'wc343'}, {title: 'Making the penises kiss.', id: 'wc344'}, {title: 'Making the penises kiss.', id: 'wc345'}, {title: 'Mall Santa.', id: 'wc346'}, {title: 'Man meat.', id: 'wc347'}, {title: 'Masturbation.', id: 'wc348'}, {title: 'Me time.', id: 'wc349'}, {title: 'Me.', id: 'wc350'}, {title: 'MechaHitler.', id: 'wc351'}, {title: 'Media coverage.', id: 'wc352'}, {title: 'Medieval Times Dinner & Tournament.', id: 'wc353'}, {title: 'Men.', id: 'wc354'}, {title: 'Menstruation.', id: 'wc355'}, {title: 'Michael Jackson.', id: 'wc356'}, {title: 'Michelle Obama\'s arms.', id: 'wc357'}, {title: 'Mild autism.', id: 'wc358'}, {title: 'Mooing.', id: 'wc359'}, {title: 'Moral ambiguity.', id: 'wc360'}, {title: 'Morgan Freeman\'s voice.', id: 'wc361'}, {title: 'Mouth herpes.', id: 'wc362'}, {title: 'Mr. Clean, right behind you.', id: 'wc363'}, {title: 'Muhammad (Praise Be Unto Him).', id: 'wc364'}, {title: 'Multiple stab wounds.', id: 'wc365'}, {title: 'Mutually-assured destruction.', id: 'wc366'}, {title: 'My collection of high-tech sex toys.', id: 'wc367'}, {title: 'My first kill.', id: 'wc368'}, {title: 'My genitals.', id: 'wc369'}, {title: 'My hot cousin.', id: 'wc370'}, {title: 'My humps.', id: 'wc371'}, {title: 'My inner demons.', id: 'wc372'}, {title: 'My machete.', id: 'wc373'}, {title: 'My relationship status.', id: 'wc374'}, {title: 'My sex life.', id: 'wc375'}, {title: 'My soul.', id: 'wc376'}, {title: 'My vagina.', id: 'wc377'}, {title: 'Natalie Portman.', id: 'wc378'}, {title: 'Natural male enhancement.', id: 'wc379'}, {title: 'Natural selection.', id: 'wc380'}, {title: 'Nazis.', id: 'wc381'}, {title: 'Necrophilia.', id: 'wc382'}, {title: 'Neil Patrick Harris.', id: 'wc383'}, {title: 'New Age music.', id: 'wc384'}, {title: 'Nickelback.', id: 'wc385'}, {title: 'Nicolas Cage.', id: 'wc386'}, {title: 'Nipple blades.', id: 'wc387'}, {title: 'Nocturnal emissions.', id: 'wc388'}, {title: 'Not giving a shit about the Third World.', id: 'wc389'}, {title: 'Not reciprocating oral sex.', id: 'wc390'}, {title: 'Nublile slave boys.', id: 'wc391'}, {title: 'Nunchuck moves.', id: 'wc392'}, {title: 'Obesity.', id: 'wc393'}, {title: 'Object permanence.', id: 'wc394'}, {title: 'Old-people smell.', id: 'wc395'}, {title: 'Ominous background music.', id: 'wc396'}, {title: 'One Ring to rule them all.', id: 'wc397'}, {title: 'One thousand Slim Jims.', id: 'wc398'}, {title: 'Oompa-Loompas.', id: 'wc399'}, {title: 'Opposable thumbs.', id: 'wc400'}, {title: 'Overcompensation.', id: 'wc401'}, {title: 'Overpowering your father.', id: 'wc402'}, {title: 'Oversized lollipops.', id: 'wc403'}, {title: 'Pabst Blue Ribbon.', id: 'wc404'}, {title: 'Pac-Man uncontrollably guzzling cum.', id: 'wc405'}, {title: 'Panda sex.', id: 'wc406'}, {title: 'Panty raids.', id: 'wc407'}, {title: 'Parting the Red Sea.', id: 'wc408'}, {title: 'Party poopers.', id: 'wc409'}, {title: 'Passable transvestites.', id: 'wc410'}, {title: 'Passing a kidney stone.', id: 'wc411'}, {title: 'Passive-aggressive Post-it notes.', id: 'wc412'}, {title: 'Pedophiles.', id: 'wc413'}, {title: 'Peeing a little bit.', id: 'wc414'}, {title: 'Penis envy.', id: 'wc415'}, {title: 'Picking up girls at the abortion clinic.', id: 'wc416'}, {title: 'Pictures of boobs.', id: 'wc417'}, {title: 'Pistol-whipping a hostage.', id: 'wc418'}, {title: 'Pixelated bukkake.', id: 'wc419'}, {title: 'Police brutality.', id: 'wc420'}, {title: 'Pooping back and forth. Forever.', id: 'wc421'}, {title: 'Poor life choices.', id: 'wc422'}, {title: 'Poor people.', id: 'wc423'}, {title: 'Poorly-timed Holocaust jokes.', id: 'wc424'}, {title: 'Porn stars.', id: 'wc425'}, {title: 'Powerful thighs.', id: 'wc426'}, {title: 'Prancing.', id: 'wc427'}, {title: 'Praying the gay away.', id: 'wc428'}, {title: 'Preteens.', id: 'wc429'}, {title: 'Pretending to be happy.', id: 'wc430'}, {title: 'Pretending to care.', id: 'wc431'}, {title: 'Pretty Pretty Princess Dress-Up Board Game.', id: 'wc432'}, {title: 'Pterodactyl eggs.', id: 'wc433'}, {title: 'Puberty.', id: 'wc434'}, {title: 'Public ridicule.', id: 'wc435'}, {title: 'Pulling out,', id: 'wc436'}, {title: 'Pumping out a baby every nine months.', id: 'wc437'}, {title: 'Puppies!', id: 'wc438'}, {title: 'Queefing.', id: 'wc439'}, {title: 'Quiche.', id: 'wc440'}, {title: 'Quivering jowls.', id: 'wc441'}, {title: 'Racially-biased SAT questions.', id: 'wc442'}, {title: 'Racism.', id: 'wc443'}, {title: 'Raping and pillaging.', id: 'wc444'}, {title: 'Re-gifting.', id: 'wc445'}, {title: 'Repression,.', id: 'wc446'}, {title: 'Republicans.', id: 'wc447'}, {title: 'Revenge fucking.', id: 'wc448'}, {title: 'Riding off into the sunset.', id: 'wc449'}, {title: 'Ripping into a man\'s chest and pulling out his still-beating heart.', id: 'wc450'}, {title: 'Rising from the grave.', id: 'wc451'}, {title: 'Road head.', id: 'wc452'}, {title: 'Robert Downey, Jr.', id: 'wc453'}, {title: 'RoboCop.', id: 'wc454'}, {title: 'Ronald Reagan.', id: 'wc455'}, {title: 'Roofies.', id: 'wc456'}, {title: 'Ryan Gosling riding in on a white horse.', id: 'wc457'}, {title: 'Same-sex ice dancing.', id: 'wc458'}, {title: 'Santa Claus.', id: 'wc459'}, {title: 'Santa\'s heavy sack.', id: 'wc460'}, {title: 'Sarah Palin.', id: 'wc461'}, {title: 'Saxophone solos.', id: 'wc462'}, {title: 'Scalping.', id: 'wc463'}, {title: 'Science.', id: 'wc464'}, {title: 'Scientology,', id: 'wc465'}, {title: 'Scrotal frostbite.', id: 'wc466'}, {title: 'Scrotum tickling.', id: 'wc467'}, {title: 'Scrubbing under the folds.', id: 'wc468'}, {title: 'Sean Connery.', id: 'wc469'}, {title: 'Sean Penn.', id: 'wc470'}, {title: 'Seduction.', id: 'wc471'}, {title: 'Self-loathing.', id: 'wc472'}, {title: 'Seppuku.', id: 'wc473'}, {title: 'Serfdom.', id: 'wc474'}, {title: 'Several intertwining love stories featuring Hugh Grant.', id: 'wc475'}, {title: 'Sexting.', id: 'wc476'}, {title: 'Sexual humiliation.', id: 'wc477'}, {title: 'Sexual tension.', id: 'wc478'}, {title: 'Sexy pillow fights.', id: 'wc479'}, {title: 'Sexy siamese twins.', id: 'wc480'}, {title: 'Shaft.', id: 'wc481'}, {title: 'Shapeshifters.', id: 'wc482'}, {title: 'Shaquille O\'Neal\'s acting career.', id: 'wc483'}, {title: 'Sharing needles.', id: 'wc484'}, {title: 'Skeletor.', id: 'wc485'}, {title: 'Slow motion.', id: 'wc486'}, {title: 'Smallpox blankets.', id: 'wc487'}, {title: 'Smegma.', id: 'wc488'}, {title: 'Sniffing glue.', id: 'wc489'}, {title: 'Socks.', id: 'wc490'}, {title: 'Soiling oneself.', id: 'wc491'}, {title: 'Some really fucked-up shit.', id: 'wc492'}, {title: 'Soup that is too hot.', id: 'wc493'}, {title: 'Space Jam on VHS.', id: 'wc494'}, {title: 'Space muffins.', id: 'wc495'}, {title: 'Special musical guest, Cher.', id: 'wc496'}, {title: 'Spectacular abs.', id: 'wc497'}, {title: 'Sperm whales.', id: 'wc498'}, {title: 'Spontaneous human combustion.', id: 'wc499'}, {title: 'Spring break!', id: 'wc500'}, {title: 'Statistically validated stereotypes.', id: 'wc501'}, {title: 'Stephen Hawking talking dirty.', id: 'wc502'}, {title: 'Stifling a giggle at the mention of Hutus and Tutsis.', id: 'wc503'}, {title: 'Stranger danger.', id: 'wc504'}, {title: 'Subduing a grizzly bear and making her your wife.', id: 'wc505'}, {title: 'Sudden Poop Explosion Disease.', id: 'wc506'}, {title: 'Suicidal thoughts.', id: 'wc507'}, {title: 'Sunshine and rainbows.', id: 'wc508'}, {title: 'Surprise sex!', id: 'wc509'}, {title: 'Survivor\'s guilt.', id: 'wc510'}, {title: 'Sweet, sweet vengeance.', id: 'wc511'}, {title: 'Swiftly achieving orgasm.', id: 'wc512'}, {title: 'Switching to Geico.', id: 'wc513'}, {title: 'Swooping.', id: 'wc514'}, {title: 'Take-backsies.', id: 'wc515'}, {title: 'Taking a man\'s eyes and balls out and putting his eyes where his balls go and then his balls in the eye holes.', id: 'wc516'}, {title: 'Taking down Santa with a surface-to-air missiles.', id: 'wc517'}, {title: 'Taking off your shirt.', id: 'wc518'}, {title: 'Tangled Slinkys.', id: 'wc519'}, {title: 'Tasteful sideboob.', id: 'wc520'}, {title: 'Teaching a robot to love.', id: 'wc521'}, {title: 'Team-building exercises.', id: 'wc522'}, {title: 'Teenage pregnancy.', id: 'wc523'}, {title: 'Tentacle porn.', id: 'wc524'}, {title: 'Testicular torsion.', id: 'wc525'}, {title: 'That thing that electrocutes your abs.', id: 'wc526'}, {title: 'The American Dream.', id: 'wc527'}, {title: 'The Big Bang.', id: 'wc528'}, {title: 'The Blood of Christ.', id: 'wc529'}, {title: 'The boners of the elderly.', id: 'wc530'}, {title: 'The Care Bear Stare.', id: 'wc531'}, {title: 'The Chinese gymnastics team.', id: 'wc532'}, {title: 'The chronic.', id: 'wc533'}, {title: 'The clitoris.', id: 'wc534'}, {title: 'The corporations.', id: 'wc535'}, {title: 'The Dance of the Sugar Plum Fairy.', id: 'wc536'}, {title: 'The day the birds attacked.', id: 'wc537'}, {title: 'The Donald Trump Seal of Approval.', id: 'wc538'}, {title: 'The economy.', id: 'wc539'}, {title: 'The Fanta girls.', id: 'wc540'}, {title: 'The folly of man.', id: 'wc541'}, {title: 'The forbidden fruit.', id: 'wc542'}, {title: 'The Force.', id: 'wc543'}, {title: 'The four arms of Vishnu.', id: 'wc544'}, {title: 'The gays.', id: 'wc545'}, {title: 'The glass ceiling.', id: 'wc546'}, {title: 'The Google.', id: 'wc547'}, {title: 'The grey nutrient broth that sustains Mitt Romney.', id: 'wc548'}, {title: 'The Gulags.', id: 'wc549'}, {title: 'The Hamburglar.', id: 'wc550'}, {title: 'The hardworking Mexican.', id: 'wc551'}, {title: 'The harsh light of day.', id: 'wc552'}, {title: 'The heart of a child.', id: 'wc553'}, {title: 'The hiccups.', id: 'wc554'}, {title: 'The Holy Bible.', id: 'wc555'}, {title: 'The homosexual agenda.', id: 'wc556'}, {title: 'The human body.', id: 'wc557'}, {title: 'The Hustle.', id: 'wc558'}, {title: 'The inevitable heat death of the universe.', id: 'wc559'}, {title: 'The invisible hand.', id: 'wc560'}, {title: 'The Jews.', id: 'wc561'}, {title: 'The KKK.', id: 'wc562'}, {title: 'The Kool-Aid Man.', id: 'wc563'}, {title: 'The Little Engine That Could.', id: 'wc564'}, {title: 'The Make-A-Wish foundation.', id: 'wc565'}, {title: 'The mere concept of Applebee\'s.', id: 'wc566'}, {title: 'The milk man.', id: 'wc567'}, {title: 'The miracle of childbirth.', id: 'wc568'}, {title: 'The mixing of the races.', id: 'wc569'}, {title: 'The new Radiohead album.', id: 'wc570'}, {title: 'The placenta.', id: 'wc571'}, {title: 'The Pope.', id: 'wc572'}, {title: 'The profoundly handicapped.', id: 'wc573'}, {title: 'The Rapture.', id: 'wc574'}, {title: 'The Rev. Dr. Martin Luther King, Jr.', id: 'wc575'}, {title: 'The shambling corpse of Larry King.', id: 'wc576'}, {title: 'The South.', id: 'wc577'}, {title: 'The Star Wars Holiday Special.', id: 'wc578'}, {title: 'The taint; the grundle; the fleshy fun-bridge.', id: 'wc579'}, {title: 'The Tempur-Pedic Swedish Sleep System.', id: 'wc580'}, {title: 'The terrorists.', id: 'wc581'}, {title: 'The Three-Fifths Compromise.', id: 'wc582'}, {title: 'The tiny calloused hands of the Chinese  children that made this card.', id: 'wc583'}, {title: 'The token minority.', id: 'wc584'}, {title: 'The Trail of Tears.', id: 'wc585'}, {title: 'The true meaning of Christmas.', id: 'wc586'}, {title: 'The Ubermensch.', id: 'wc587'}, {title: 'The underground railroad.', id: 'wc588'}, {title: 'The violation of our most basic human rights.', id: 'wc589'}, {title: 'The Virginia Tech Massacre.', id: 'wc590'}, {title: 'The World of Warcraft.', id: 'wc591'}, {title: 'Third base.', id: 'wc592'}, {title: 'Tiny nipples.', id: 'wc593'}, {title: 'Tom Cruise.', id: 'wc594'}, {title: 'Tongue.', id: 'wc595'}, {title: 'Toni Morrison\'s vagina.', id: 'wc596'}, {title: 'Too much hair gel.', id: 'wc597'}, {title: 'Tripping balls.', id: 'wc598'}, {title: 'Two midgets shitting into a bucket.', id: 'wc599'}, {title: 'Unfathomable stupidity.', id: 'wc600'}, {title: 'Upgrading homeless people to mobile hotspots.', id: 'wc601'}, {title: 'Uppercuts.', id: 'wc602'}, {title: 'Vehicular manslaughter.', id: 'wc603'}, {title: 'Viagra.', id: 'wc604'}, {title: 'Vigilante justice.', id: 'wc605'}, {title: 'Vigorous jazz hands.', id: 'wc606'}, {title: 'Vikings.', id: 'wc607'}, {title: 'Waiting \'til marriage.', id: 'wc608'}, {title: 'Waking up half-naked in a Denny\'s parking lot.', id: 'wc609'}, {title: 'Waterboarding.', id: 'wc610'}, {title: 'Weapons-grade plutonium.', id: 'wc611'}, {title: 'Wearing an octopus for a hat.', id: 'wc612'}, {title: 'Wearing underwear inside-out to avoid doing laundry.', id: 'wc613'}, {title: 'Whatever Kwanzaa is supposed to be about.', id: 'wc614'}, {title: 'When you fart and a little bit comes out.', id: 'wc615'}, {title: 'Whining like a little bitch.', id: 'wc616'}, {title: 'Whipping a disobedient slave.', id: 'wc617'}, {title: 'Whipping it out.', id: 'wc618'}, {title: 'White people.', id: 'wc619'}, {title: 'White privilege.', id: 'wc620'}, {title: 'Wifely duties.', id: 'wc621'}, {title: 'William Shatner.', id: 'wc622'}, {title: 'Winking at old people.', id: 'wc623'}, {title: 'Wiping her butt.', id: 'wc624'}, {title: 'Women in yogurt commercials.', id: 'wc625'}, {title: 'Women\'s suffrage.', id: 'wc626'}, {title: 'Words, words, words.', id: 'wc627'}, {title: 'World peace.', id: 'wc628'}, {title: 'Yeast.', id: 'wc629'}, {title: 'YOU MUST CONSTRUCT ADDITIONAL PYLONS.', id: 'wc630'}, {title: 'Zeus\'s sexual appetites.', id: 'wc631'}];
var blackCards = [{title: ' - kid-tested mother-approved. ', id: 'bc 1 '}, {title: ' -: good to the last drop. ', id: 'bc 2 '}, {title: ' -? There\'s an app for that. ', id: 'bc 3 '}, {title: ' -. Betcha can\'t have just one. ', id: 'bc 4 '}, {title: ' -. High five bro. ', id: 'bc 5 '}, {title: ' -. It\'s a trap! ', id: 'bc 6 '}, {title: ' -. That\'s how I want to die. ', id: 'bc 7 '}, {title: ' (Draw 2, Pick 3) - + - = - ', id: 'bc 8 '}, {title: ' (Draw 2, Pick 3) I went from – to -, all thanks to. ', id: 'bc 9 '}, {title: ' (Draw 2, Pick 3) Make a haiku. ', id: 'bc 10 '}, {title: ' (Pick 2) - would be woefully incomplete without -. ', id: 'bc 11 '}, {title: ' (Pick 2) – is a slippery slope that leads to -. ', id: 'bc 12 '}, {title: ' (Pick 2) An international tribunal has found – guilty of -. ', id: 'bc 13 '}, {title: ' (Pick 2) An the Academy Award for – goes to -. ', id: 'bc 14 '}, {title: ' (Pick 2) Before -, all we had was-. ', id: 'bc 15 '}, {title: ' (Pick 2) Dear Sir or Madam, We regret to inform you that the office of – has denied your request for -. ', id: 'bc 16 '}, {title: ' (Pick 2) For my next trick, I will pull – out of -. ', id: 'bc 17 '}, {title: ' (Pick 2) I never truly understood – until I encountered -. ', id: 'bc 18 '}, {title: ' (Pick 2) I spent my whole life working toward -, only to have it ruined by -. ', id: 'bc 19 '}, {title: ' (Pick 2) If God didn\'t want us to enjoy -, he wouldn\'t have given us -. ', id: 'bc 20 '}, {title: ' (Pick 2) In a pinch, - can be a suitable substitute for -. ', id: 'bc 21 '}, {title: ' (Pick 2) In a world ravaged by -, our only solace is -. ', id: 'bc 22 '}, {title: ' (Pick 2) In M. Night Shamalan\'s new movie, Bruce Willis discovers that – had really been – all along. ', id: 'bc 23 '}, {title: ' (Pick 2) Lifetime presents -, the story of -. ', id: 'bc 24 '}, {title: ' (Pick 2) Michael Bay\'s new three-hour action epic pits – against -. ', id: 'bc 25 '}, {title: ' (Pick 2) Rumor has it that Vladimir Putin\'s favorite dish is – stuffed with -. ', id: 'bc 26 '}, {title: ' (Pick 2) Step 1: - Step 2- Step 3: Profit. ', id: 'bc 27 '}, {title: ' (Pick 2) That\'s right I killed -. How you ask? -. ', id: 'bc 28 '}, {title: ' (Pick 2) What\'s the next superhero/sidekick duo? ', id: 'bc 29 '}, {title: ' (Pick 2) When I was tripping on acid – turned into -. ', id: 'bc 30 '}, {title: ' (Pick 2) You haven\'t truly lived until you\'ve experienced – and – at the same time. ', id: 'bc 31 '}, {title: ' A romantic candlelit dinner would be incomplete without -. ', id: 'bc 32 '}, {title: ' After blacking out during New Year\'s Eve, I was awoken by -. ', id: 'bc 33 '}, {title: ' After months of debate, the Occupy Wall Street General Assembly could only agree on “More -!” ', id: 'bc 34 '}, {title: ' After the earthquake, Sean Penn bought – to the people of Haiti. ', id: 'bc 35 '}, {title: ' Alternative medicine is now embracing the curative powers of -. ', id: 'bc 36 '}, {title: ' And I would have gotten away with it, too, if it hadn\'t been for -. ', id: 'bc 37 '}, {title: ' Anthropologists have recently discovered a primitive tribe that worships -. ', id: 'bc 38 '}, {title: ' Before I run for president, I must destroy all evidence of my involvement with -. ', id: 'bc 39 '}, {title: ' BILLY MAYS HERE FOR -. ', id: 'bc 40 '}, {title: ' But before I kill you, Mr. Bond, I must show you -. ', id: 'bc 41 '}, {title: ' Charades was ruined for me forever when my mom had to act out -. ', id: 'bc 42 '}, {title: ' Coming to Broadway this season, -: The Musical. ', id: 'bc 43 '}, {title: ' Dear Abby, I\'m having some trouble with – and would like your advice. ', id: 'bc 44 '}, {title: ' During his midlife crisis, my dad got really into -. ', id: 'bc 45 '}, {title: ' During Picasso\'s often-overlooked Brown Period, he produced hundreds of paintings of -. ', id: 'bc 46 '}, {title: ' During sex, I like to think about -. ', id: 'bc 47 '}, {title: ' Every Christmas my uncle gets drunk and tells the story about -. ', id: 'bc 48 '}, {title: ' Everyone down on the ground! We don\'t want to hurt anyone. We\'re just here for -. ', id: 'bc 49 '}, {title: ' He who controls – controls the world. ', id: 'bc 50 '}, {title: ' How am I maintaining my relationship status. ', id: 'bc 51 '}, {title: ' I do not know with what weapons World War III will be fought, but World War IV will be fought with. ', id: 'bc 52 '}, {title: ' I drink to forget -. ', id: 'bc 53 '}, {title: ' I got 99 problems but – ain\'t one. ', id: 'bc 54 '}, {title: ' I learned the hard way that you can\'t cheer up a grieving friend with -. ', id: 'bc 55 '}, {title: ' I\'m sorry professor, but I couldn\'t complete my homework because of -. ', id: 'bc 56 '}, {title: ' In 1,000 years when paper money is but a distant memory, - will be our currency. ', id: 'bc 57 '}, {title: ' In an attempt to reach a wider audience, the Smithsonian Museum of Natural History has opened an interactive exhibit on -. ', id: 'bc 58 '}, {title: ' In his new self-produced album, Kanye West raps over the sounds of -. ', id: 'bc 59 '}, {title: ' In his newest and most difficult stunt, David Blaine must escape from -. ', id: 'bc 60 '}, {title: ' In its new tourism campaign, Detroit proclaims that it has finally eliminated -. ', id: 'bc 61 '}, {title: ' In L.A. county Jail, word is you can trade 200 cigarettes for -. ', id: 'bc 62 '}, {title: ' In Michael Jackson\'s final moments, he thought about -. ', id: 'bc 63 '}, {title: ' In Rome, there are whisperings that the Vatican has a secret room devoted to -. ', id: 'bc 64 '}, {title: ' In the distant future, historians will agree that – marked the beginning of America\'s decline. ', id: 'bc 65 '}, {title: ' In the new Disney Channel Original Movie, Hannah Montana struggles with – for the first time. ', id: 'bc 66 '}, {title: ' Instead of coal, Santa now gives the bad children - . ', id: 'bc 67 '}, {title: ' It\'s a pity that kids these days are all getting involved with -. ', id: 'bc 68 '}, {title: ' Jesus is -. ', id: 'bc 69 '}, {title: ' Life for American Indians was forever changed when the White Man introduced them to -. ', id: 'bc 70 '}, {title: ' Little Miss Muffet, Sat on a tuffet, Eating her curds and -. ', id: 'bc 71 '}, {title: ' Major League Baseball has banned – for giving players an unfair advantage. ', id: 'bc 72 '}, {title: ' Maybe she\'s born with it. Maybe it\'s -. ', id: 'bc 73 '}, {title: ' Members of New York\'s social elite are paying thousands of dollars just to experience -. ', id: 'bc 74 '}, {title: ' MTV\'s new reality show features eight washed-up celebrities living with -. ', id: 'bc 75 '}, {title: ' My country, \'tis of thee, sweet land of -. ', id: 'bc 76 '}, {title: ' My mom freaked out when she looked at my browser history and found -.com/-. ', id: 'bc 77 '}, {title: ' My new favorite porn star is Joey “-” McGee. ', id: 'bc 78 '}, {title: ' Next from J.K. Rowling: Harry Potter and the Chamber of -. ', id: 'bc 79 '}, {title: ' Next on ESPN2: The World Series of -. ', id: 'bc 80 '}, {title: ' Next time on Dr. Phil: How to talk to your child about -. ', id: 'bc 81 '}, {title: ' On the third day of Christmas, my true love game to me: three French hens, two turtle doves, and -. ', id: 'bc 82 '}, {title: ' Only two things in life are certain: death and -. ', id: 'bc 83 '}, {title: ' Science will never explain the origin of -. ', id: 'bc 84 '}, {title: ' Studies show that lab rats navigate mazes 50% faster after being exposed to - ', id: 'bc 85 '}, {title: ' The CIA now interrogates enemy agents by repeatedly subjecting them to -. ', id: 'bc 86 '}, {title: ' The class field trip was completely ruined by -. ', id: 'bc 87 '}, {title: ' The Five Stages of Grief: denial, anger, bargaining, - acceptance. ', id: 'bc 88 '}, {title: ' The healing process began when I joined a support group for victims of -. ', id: 'bc 89 '}, {title: ' The socialist governments of Scandanavia have declared that access to – is a basic human right. ', id: 'bc 90 '}, {title: ' The votes are in, and the new high school mascot is -. ', id: 'bc 91 '}, {title: ' This holiday season, Tim Allen must overcome his fear of – to save Christmas. ', id: 'bc 92 '}, {title: ' This is the way the world ends This is the way the world ends Not with a bang but with -. ', id: 'bc 93 '}, {title: ' This is your captain speaking. Fasten your seatbelts and prepare for -. ', id: 'bc 94 '}, {title: ' This month\'s Cosmo: “Spice up your sex life by bringing – into the bedroom.” ', id: 'bc 95 '}, {title: ' This reason on Man vs. Wild, Bear Grylls must survive in the depths of the Amazon with only – and his wits. ', id: 'bc 96 '}, {title: ' Tonight on 20/20: What you don\'t know about – could kill you. ', id: 'bc 97 '}, {title: ' TSA guidelines now prohibit – on airplanes. ', id: 'bc 98 '}, {title: ' Wake up, America. Christmas is under attack by secular liberals and their -. ', id: 'bc 99 '}, {title: ' War! What is it good for? ', id: 'bc 100 '}, {title: ' What am I giving up for Lent? ', id: 'bc 101 '}, {title: ' What are my parents hiding from me? ', id: 'bc 102 '}, {title: ' What brought the orgy to a grinding halt? ', id: 'bc 103 '}, {title: ' What did I bring back from Mexico? ', id: 'bc 104 '}, {title: ' What did the US airdrop to the children of Afghanistan? ', id: 'bc 105 '}, {title: ' What did Vin Diesel eat for dinner? ', id: 'bc 106 '}, {title: ' What do old people smell like? ', id: 'bc 107 '}, {title: ' What does Dick Cheney prefer? ', id: 'bc 108 '}, {title: ' What don\'t you want to find in your Chinese food? ', id: 'bc 109 '}, {title: ' What ended my last relationship? ', id: 'bc 110 '}, {title: ' What gets better with age? ', id: 'bc 111 '}, {title: ' What gives me uncontrollable gas? ', id: 'bc 112 '}, {title: ' What has been making life difficult at the nudist colony? ', id: 'bc 113 '}, {title: ' What helps Obama unwind? ', id: 'bc 114 '}, {title: ' What is Batman\'s guilty pleasure? ', id: 'bc 115 '}, {title: ' What keeps me warm during the cold, cold winter? ', id: 'bc 116 '}, {title: ' What never fails to liven up the party? ', id: 'bc 117 '}, {title: ' What people like -. ', id: 'bc 118 '}, {title: ' What will always get you laid? ', id: 'bc 119 '}, {title: ' What will I bring back in time to convince people that I am a powerful wizard? ', id: 'bc 120 '}, {title: ' What would grandma find disturbing, yet oddly charming? ', id: 'bc 121 '}, {title: ' What\'s a girl\'s best friend? ', id: 'bc 122 '}, {title: ' What\'s my anti-drug? ', id: 'bc 123 '}, {title: ' What\'s my secret power? ', id: 'bc 124 '}, {title: ' What\'s Teach for America using to inspire inner city students to succeed? ', id: 'bc 125 '}, {title: ' What\'s that smell? ', id: 'bc 126 '}, {title: ' What\'s that sound? ', id: 'bc 127 '}, {title: ' What\'s the crustiest? ', id: 'bc 128 '}, {title: ' What\'s the gift that keeps on giving? ', id: 'bc 129 '}, {title: ' What\'s the most emo? ', id: 'bc 130 '}, {title: ' What\'s the new fad diet? ', id: 'bc 131 '}, {title: ' What\'s the next Happy Meal toy? ', id: 'bc 132 '}, {title: ' What\'s there a ton of in heaven? ', id: 'bc 133 '}, {title: ' When all else fails, I can always masturbate to -. ', id: 'bc 134 '}, {title: ' When I am a billionaire, I shall erect a 50-foot statue to commemorate -. ', id: 'bc 135 '}, {title: ' When I am President of the United States, I will create the Department of -. ', id: 'bc 136 '}, {title: ' When I pooped, what came out of my butt? ', id: 'bc 137 '}, {title: ' When Pharaoh remained unmoved, Moses called down a Plague of -. ', id: 'bc 138 '}, {title: ' When the United States raced the Soviet Union to the moon, the Mexican government funneled millions of pesos into research on -. ', id: 'bc 139 '}, {title: ' Why am I sticky? ', id: 'bc 140 '}, {title: ' Why can\'t I sleep at night? ', id: 'bc 141 '}, {title: ' Why do I hurt all over? ', id: 'bc 142 '}];

// Define actions which can be called from the client using ss.rpc('demo.ACTIONNAME', param1, param2...)
exports.actions = function(req, res, ss) {

  // use session vars
  req.use('session');

  // expire session after 20 minutes
  ss.session.options.maxAge = 1200000;

  // use authentication middleware
  req.use('auth.authenticated');

  return {
    createGame: function(gameId, playerName) {
      
      var game = getGameByGameId(req.session.gameId);
      var playerId = req.session.userId;

      // if the game already exists, join it 
      if (getGameByGameId(gameId)) {
        ss.publish.user(playerId, 'gameExists');
        return res(false);
      }

      // persist gameId in session
      req.session.gameId = gameId;
      req.session.save();

      // create a new game
      var g = new Game(gameId, Object.create(whiteCards), Object.create(blackCards), ss, req);

      // make player judge
      g.currentJudge = playerId;

      games[gameId] = g;
      //console.log(util.inspect(g));
      // have player join the game, subscribe to the channel for that game
      g.join(playerId, playerName);
      req.session.channel.subscribe(gameId);
    },

    joinGame:  function(gameId, playerName) {
      var game = getGameByGameId(gameId);
      var playerId = req.session.userId;

      // if the game doesn't exists, fail here
      if (!getGameByGameId(gameId)) {
        ss.publish.user(playerId, 'gameDoesNotExist');
        return res(false);
      }

      // persist gameId in session
      req.session.gameId = gameId;
      req.session.save();

      // join the game, subscribe to game channel
      game.join(playerId, playerName);

      req.session.channel.subscribe(gameId);

    },

    leaveGame: function() {
      var game = getGameByGameId(req.session.gameId);
      var playerId = req.session.userId;

      // leave the game
      game.leave(playerId);

      ss.publish.user(req.session.id, 'endSession');
      req.session.setUserId(null);
      req.session.destroy();
    },

    // judge only method
    startGame: function() {
      var game = getGameByGameId(req.session.gameId);
      var playerId = req.session.userId;
      
      // if this player is the judge, start the game
      if (game.isJudge(playerId)) {      
        game.start();
  
        // let players know the game has started
        game.emitAllGameStart();
      }
    },

    updateClient: function() {
      var game = getGameByGameId(req.session.gameId);
      var playerId = req.session.userId;

      game.updateClient(playerId);
    },

    chooseCard:  function(card) {
      var game = getGameByGameId(req.session.gameId);
      var playerId = req.session.userId;

      game.chooseCard(playerId, card);
    },

    pickWinner: function(card) {
      var game = getGameByGameId(req.session.gameId);
      var playerId = req.session.userId;

      game.pickWinner(playerId, card);
    },

    test: function() {
      var ut = new test(Object.create(whiteCards), Object.create(blackCards), ss, req);

      ut.testCycling();
    },

    // debug functions
    debug: function() {
      var game = getGameByGameId(req.session.gameId);
      //debug
      console.log("Current players: " + game.totalPlayers());
      console.log(util.inspect(game.players));

      console.log("Players in waiting list:");
      for (var player1 in game.waitingList) {
        console.log(game.waitingList[player1].id);
      }
      console.log("waiting?: " + game.waitingForPlayers);
      console.log("game cards: " + game.gameWhiteCards.length);
      console.log("actual cards: " + whiteCards.length);
      console.log("total chosen cards: " + game.totalChosenCards());
      console.log("total players: " + game.totalPlayers());
      console.log("judge: " + game.currentJudge + "(" + game.players[game.currentJudge].name + ")");
      
    }
  };
};


//-----------------
// private methods
//-----------------

// game lookups
function getGameByPlayerId(playerId) {
  for (var g in games) {
    var game = games[g];
    for (var p in game.players) {
      var player = game.player[p];
      if (player.id === playerId) {
        return game;
      }
    }
  }

  return false;
}

function getGameByGameId(gameId) {
  for (var g in games) {
    if (g === gameId) {
      return games[g];
    }
  }

  return false;
}